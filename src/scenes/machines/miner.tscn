[gd_scene load_steps=9 format=3 uid="uid://d20benoe7jsah"]

[ext_resource type="Script" path="res://src/scripts/machines/miner.gd" id="1_2n5go"]
[ext_resource type="Texture2D" uid="uid://co5nr7gxnqfbv" path="res://src/img/sheets/props/MultiTilemachines.png" id="2_bwq8u"]
[ext_resource type="PackedScene" uid="uid://bjsitfm2itrmk" path="res://src/scenes/UI/inv/inv_grid.tscn" id="3_5nnhp"]

[sub_resource type="Curve" id="Curve_hjwi5"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Gradient" id="Gradient_lxbq5"]
offsets = PackedFloat32Array(0, 0.5, 1)
colors = PackedColorArray(1, 0.87451, 0.360784, 1, 0.890196, 0.435294, 0, 1, 0.277528, 0.277528, 0.277528, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_f8dal"]
size = Vector2(64, 64)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_muadu"]
size = Vector2(32, 32)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_0cghn"]

[node name="miner" type="StaticBody2D" node_paths=PackedStringArray("colisionShape", "tierColor", "outInventory_node", "MouseDetectionPanel", "ItemOutputsNode", "BuildingModeInAndOutPreview") groups=["poluentes"]]
collision_layer = 4
collision_mask = 4
input_pickable = true
script = ExtResource("1_2n5go")
Machine = "miner"
Type = 0
colisionShape = NodePath("CollisionShape2D")
tierColor = NodePath("model/minner")
NumSlots = 4
outInventory_node = NodePath("inventory/inv_grid")
MouseDetectionPanel = NodePath("Panel")
ItemOutputsNode = NodePath("Outputs")
BuildingModeInAndOutPreview = NodePath("model/Inputs-outputs")

[node name="model" type="Node2D" parent="."]
z_index = 1
position = Vector2(16, 16)

[node name="minner" type="Polygon2D" parent="model"]
show_behind_parent = true
polygon = PackedVector2Array(24, -24, 8.10251, -24, 8, -32, -8, -32, -8, -32, -8, -24, -24, -24, -24, -8, -32, -8, -32, 8, -24, 8, -24, 24, -8, 24, -8, 32, 8, 32, 8, 24, 24, 24, 24, 8, 32, 8, 32, -8, 24, -8)

[node name="layer0" type="Sprite2D" parent="model"]
position = Vector2(4.76837e-07, 4.76837e-07)
texture = ExtResource("2_bwq8u")
region_enabled = true
region_rect = Rect2(0, 0, 64, 64)

[node name="layer1" type="Sprite2D" parent="model"]
z_index = 1
position = Vector2(0, 4.76837e-07)
texture = ExtResource("2_bwq8u")
region_enabled = true
region_rect = Rect2(64, 0, 64, 64)

[node name="Polygon2D" type="Polygon2D" parent="model/layer1"]
show_behind_parent = true
polygon = PackedVector2Array(-24, -7, -19, -7, -19, -5, -18, -5, -18, -3, -16, -3, -16, 3, -18, 3, -18, 5, -19, 5, -19, 7, -24, 7)

[node name="Polygon2D2" type="Polygon2D" parent="model/layer1"]
show_behind_parent = true
rotation = -1.5708
polygon = PackedVector2Array(-24, -7, -19, -7, -19, -5, -18, -5, -18, -3, -16, -3, -16, 3, -18, 3, -18, 5, -19, 5, -19, 7, -24, 7)

[node name="Polygon2D3" type="Polygon2D" parent="model/layer1"]
show_behind_parent = true
rotation = -3.14159
polygon = PackedVector2Array(-24, -7, -19, -7, -19, -5, -18, -5, -18, -3, -16, -3, -16, 3, -18, 3, -18, 5, -19, 5, -19, 7, -24, 7)

[node name="Polygon2D4" type="Polygon2D" parent="model/layer1"]
show_behind_parent = true
rotation = -4.71239
polygon = PackedVector2Array(-24, -7, -19, -7, -19, -5, -18, -5, -18, -3, -16, -3, -16, 3, -18, 3, -18, 5, -19, 5, -19, 7, -24, 7)

[node name="CPUParticles2D" type="CPUParticles2D" parent="model"]
light_mask = 2
z_index = 1
emitting = false
amount = 40
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_max = 35.0
angular_velocity_max = 15.0
scale_amount_max = 10.0
scale_amount_curve = SubResource("Curve_hjwi5")
color_ramp = SubResource("Gradient_lxbq5")
hue_variation_min = -1.0
hue_variation_max = 1.0

[node name="Inputs-outputs" type="Node2D" parent="model"]
z_index = 1000

[node name="Line2D" type="Line2D" parent="model/Inputs-outputs"]
position = Vector2(-16, 32)
points = PackedVector2Array(0, 0, 0, 8, -8, 5, 0, 15, 8, 5, 0, 8)
width = 2.0
default_color = Color(1, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2

[node name="Line2D2" type="Line2D" parent="model/Inputs-outputs"]
position = Vector2(16, 32)
points = PackedVector2Array(0, 0, 0, 8, -8, 5, 0, 15, 8, 5, 0, 8)
width = 2.0
default_color = Color(1, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2

[node name="Line2D3" type="Line2D" parent="model/Inputs-outputs"]
position = Vector2(32, 16)
rotation = -1.57079
points = PackedVector2Array(0, 0, 0, 8, -8, 5, 0, 15, 8, 5, 0, 8)
width = 2.0
default_color = Color(1, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2

[node name="Line2D4" type="Line2D" parent="model/Inputs-outputs"]
position = Vector2(32, -16)
rotation = -1.57079
points = PackedVector2Array(0, 0, 0, 8, -8, 5, 0, 15, 8, 5, 0, 8)
width = 2.0
default_color = Color(1, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2

[node name="Line2D5" type="Line2D" parent="model/Inputs-outputs"]
position = Vector2(-32, 16)
rotation = -4.71238
points = PackedVector2Array(0, 0, 0, 8, -8, 5, 0, 15, 8, 5, 0, 8)
width = 2.0
default_color = Color(1, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2

[node name="Line2D6" type="Line2D" parent="model/Inputs-outputs"]
position = Vector2(-32, -16)
rotation = -4.71238
points = PackedVector2Array(0, 0, 0, 8, -8, 5, 0, 15, 8, 5, 0, 8)
width = 2.0
default_color = Color(1, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2

[node name="Line2D7" type="Line2D" parent="model/Inputs-outputs"]
position = Vector2(-16, -32)
rotation = -3.14159
points = PackedVector2Array(0, 0, 0, 8, -8, 5, 0, 15, 8, 5, 0, 8)
width = 2.0
default_color = Color(1, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2

[node name="Line2D8" type="Line2D" parent="model/Inputs-outputs"]
position = Vector2(16, -32)
rotation = -3.14159
points = PackedVector2Array(0, 0, 0, 8, -8, 5, 0, 15, 8, 5, 0, 8)
width = 2.0
default_color = Color(1, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(16, 16)
shape = SubResource("RectangleShape2D_f8dal")

[node name="item_detector" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="item_detector"]
position = Vector2(16, 16)
shape = SubResource("RectangleShape2D_muadu")
debug_color = Color(1, 0.364706, 0, 0.419608)

[node name="inventory" type="Node2D" parent="."]
z_index = 4000
position = Vector2(16, 16)

[node name="inv_grid" parent="inventory" instance=ExtResource("3_5nnhp")]
offset_left = 32.0
offset_top = -32.0
offset_right = 96.0
offset_bottom = -16.0

[node name="Panel" type="Panel" parent="."]
offset_left = -16.0
offset_top = -16.0
offset_right = 48.0
offset_bottom = 48.0
theme_override_styles/panel = SubResource("StyleBoxEmpty_0cghn")

[node name="Outputs" type="Node2D" parent="."]

[node name="0" type="Marker2D" parent="Outputs"]
position = Vector2(0, 32)

[node name="0" type="RayCast2D" parent="Outputs/0"]
position = Vector2(0, 17)
target_position = Vector2(0, 16)
collision_mask = 4
hit_from_inside = true

[node name="1" type="RayCast2D" parent="Outputs/0"]
position = Vector2(-17, 0)
target_position = Vector2(-16, 0)
collision_mask = 4
hit_from_inside = true

[node name="1" type="Marker2D" parent="Outputs"]

[node name="2" type="RayCast2D" parent="Outputs/1"]
position = Vector2(-17, 0)
target_position = Vector2(-16, 0)
collision_mask = 4
hit_from_inside = true

[node name="3" type="RayCast2D" parent="Outputs/1"]
position = Vector2(0, -17)
target_position = Vector2(0, -16)
collision_mask = 4
hit_from_inside = true

[node name="2" type="Marker2D" parent="Outputs"]
position = Vector2(32, 0)

[node name="4" type="RayCast2D" parent="Outputs/2"]
position = Vector2(0, -18)
target_position = Vector2(0, -16)
collision_mask = 4
hit_from_inside = true

[node name="5" type="RayCast2D" parent="Outputs/2"]
position = Vector2(18, 0)
target_position = Vector2(16, 0)
collision_mask = 4
hit_from_inside = true

[node name="3" type="Marker2D" parent="Outputs"]
position = Vector2(32, 32)

[node name="6" type="RayCast2D" parent="Outputs/3"]
position = Vector2(17, 0)
target_position = Vector2(16, 0)
collision_mask = 4
hit_from_inside = true

[node name="7" type="RayCast2D" parent="Outputs/3"]
position = Vector2(0, 17)
target_position = Vector2(0, 16)
collision_mask = 4
hit_from_inside = true
